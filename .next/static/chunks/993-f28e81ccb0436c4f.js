"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{333:(e,s,t)=>{t.d(s,{d:()=>n});var a=t(5155),i=t(2115),l=t(4884),r=t(9434);let n=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(l.bL,{className:(0,r.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...i,ref:s,children:(0,a.jsx)(l.zi,{className:(0,r.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=l.bL.displayName},1775:(e,s,t)=>{t.d(s,{B:()=>j});var a=t(5155),i=t(2115),l=t(8539),r=t(5057),n=t(285),d=t(356),c=t(5511),o=t(4636),m=t(9869),x=t(7434),u=t(9074),h=t(5339),p=t(3013),v=t(9434),g=t(6193),f=t(4209);function j(e){let{initialData:s,onSave:t,onCancel:j,mode:b}=e,[N,y]=(0,i.useState)(s||{title:"",instructions:"",instructionType:"text",dueDate:void 0,allowLateSubmission:!1,submissionTypes:["file","text"]}),w=(0,g.z)(),C=(e,s)=>{y(t=>({...t,[e]:s})),w.markAsUnsaved()};(0,i.useEffect)(()=>{JSON.stringify(N)!==JSON.stringify(s)&&w.markAsUnsaved()},[N,s,w]);let A=async()=>{try{t(N),w.markAsSaved()}catch(e){console.error("Error saving assignment:",e)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)("input",{type:"text",value:N.title,onChange:e=>C("title",e.target.value),placeholder:"Assignment Title",className:"text-xl font-semibold bg-transparent border-none outline-none border-b-2 border-border focus:border-primary transition-colors w-full pb-1",style:{fontSize:"1.25rem"}})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(r.J,{children:"Instructions"}),(0,a.jsxs)(d.z,{value:N.instructionType,onValueChange:e=>C("instructionType",e),className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"text",id:"text-instructions"}),(0,a.jsx)(r.J,{htmlFor:"text-instructions",className:"cursor-pointer",children:"Text Instructions"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"pdf",id:"pdf-instructions"}),(0,a.jsx)(r.J,{htmlFor:"pdf-instructions",className:"cursor-pointer",children:"Upload PDF"})]})]})]}),"text"===N.instructionType&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.J,{htmlFor:"instructions",children:"Assignment Instructions"}),(0,a.jsx)(l.T,{id:"instructions",value:N.instructions,onChange:e=>C("instructions",e.target.value),placeholder:"Enter detailed instructions for the assignment...",className:"min-h-[200px]"})]}),"pdf"===N.instructionType&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.J,{children:"Upload PDF Instructions"}),(0,a.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t){if("application/pdf"!==t.type)return void alert("Please select a PDF file only");if(t.size>0xa00000)return void alert("File size must be less than 10MB");C("instructionFileUrl",URL.createObjectURL(t)),console.log("PDF instructions uploaded:",t.name,t.size,t.type)}},className:"hidden",id:"instruction-pdf-upload"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Drag and drop or click to upload PDF instructions"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Supported format: PDF files only (Max 10MB)"}),(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>{var e;null==(e=document.getElementById("instruction-pdf-upload"))||e.click()},className:"mt-3",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Choose PDF File"]})]})]}),N.instructionFileUrl&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-red-600 rounded flex items-center justify-center",children:(0,a.jsx)(x.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"âœ“ PDF instructions uploaded"}),(0,a.jsx)("p",{className:"text-xs text-green-600",children:"Ready for preview"})]}),(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>window.open(N.instructionFileUrl,"_blank"),children:"Preview PDF"})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.J,{htmlFor:"dueDate",children:"Due Date"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"(Optional - leave empty if no due date)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(o.AM,{children:[(0,a.jsx)(o.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",className:(0,v.cn)("w-full justify-start text-left font-normal max-w-xs",!N.dueDate&&"text-muted-foreground"),children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),N.dueDate?(0,p.GP)(N.dueDate,"PPP"):"No due date set"]})}),(0,a.jsx)(o.hl,{className:"w-auto p-0",children:(0,a.jsx)(c.V,{mode:"single",selected:N.dueDate,onSelect:e=>C("dueDate",e),initialFocus:!0})})]}),N.dueDate&&(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>C("dueDate",void 0),children:"Clear Date"})]}),!N.dueDate&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:'Students will see "No due date" for this assignment'})]})]})]})})}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-t bg-background sticky bottom-0",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>{w.hasUnsavedChanges?w.attemptAction(j):j()},children:"Cancel"}),(0,a.jsx)(n.$,{onClick:A,children:"create"===b?"Add Assignment":"Edit Assignment"})]}),(0,a.jsx)(f.n,{isOpen:w.showWarningModal,onClose:w.closeModal,onDiscard:w.discardChanges,onSave:()=>w.saveAndContinue(A)})]})}},4115:(e,s,t)=>{t.d(s,{d:()=>b});var a=t(5155),i=t(2115),l=t(2523),r=t(285),n=t(9409),d=t(6126),c=t(4416),o=t(5196),m=t(7924),x=t(2657),u=t(7712),h=t(4616),p=t(6193),v=t(4209);let g=[{id:"mcq-001",title:"JavaScript Variable Declaration",difficulty:"Easy",topics:["JavaScript","Variables"],question:"Which of the following is the correct way to declare a variable in JavaScript?",image:null,options:[{id:"opt-1",text:"var myVariable = 5;",isCorrect:!0},{id:"opt-2",text:"variable myVariable = 5;",isCorrect:!1},{id:"opt-3",text:"v myVariable = 5;",isCorrect:!1},{id:"opt-4",text:"declare myVariable = 5;",isCorrect:!1}]},{id:"mcq-002",title:"React State Management",difficulty:"Easy",topics:["React","State"],question:"What hook is used to manage state in functional React components?",image:null,options:[{id:"opt-1",text:"useState",isCorrect:!0},{id:"opt-2",text:"useEffect",isCorrect:!1},{id:"opt-3",text:"useContext",isCorrect:!1},{id:"opt-4",text:"useReducer",isCorrect:!1}]},{id:"mcq-003",title:"CSS Flexbox Layout",difficulty:"Medium",topics:["CSS","Layout"],question:"Which CSS property is used to change the direction of flex items?",image:null,options:[{id:"opt-1",text:"flex-direction",isCorrect:!0},{id:"opt-2",text:"flex-flow",isCorrect:!1},{id:"opt-3",text:"align-items",isCorrect:!1},{id:"opt-4",text:"justify-content",isCorrect:!1}]},{id:"mcq-004",title:"Node.js Modules",difficulty:"Medium",topics:["Node.js","Modules"],question:"How do you import a module in Node.js using CommonJS?",image:null,options:[{id:"opt-1",text:'const module = require("module-name")',isCorrect:!0},{id:"opt-2",text:'import module from "module-name"',isCorrect:!1},{id:"opt-3",text:'include module "module-name"',isCorrect:!1},{id:"opt-4",text:'use module "module-name"',isCorrect:!1}]},{id:"mcq-005",title:"Database Normalization",difficulty:"Hard",topics:["Database","Normalization"],question:"What is the main purpose of database normalization?",image:null,options:[{id:"opt-1",text:"To reduce data redundancy and improve data integrity",isCorrect:!0},{id:"opt-2",text:"To increase query performance",isCorrect:!1},{id:"opt-3",text:"To reduce storage space",isCorrect:!1},{id:"opt-4",text:"To simplify database design",isCorrect:!1}]},{id:"mcq-006",title:"TypeScript Interfaces",difficulty:"Medium",topics:["TypeScript","Interfaces"],question:"What is the correct syntax to define an optional property in a TypeScript interface?",image:null,options:[{id:"opt-1",text:"propertyName?: type",isCorrect:!0},{id:"opt-2",text:"propertyName: type?",isCorrect:!1},{id:"opt-3",text:"optional propertyName: type",isCorrect:!1},{id:"opt-4",text:"?propertyName: type",isCorrect:!1}]},{id:"mcq-007",title:"HTTP Status Codes",difficulty:"Easy",topics:["HTTP","Web APIs"],question:"Which HTTP status code indicates that a resource was successfully created?",image:null,options:[{id:"opt-1",text:"201 Created",isCorrect:!0},{id:"opt-2",text:"200 OK",isCorrect:!1},{id:"opt-3",text:"204 No Content",isCorrect:!1},{id:"opt-4",text:"202 Accepted",isCorrect:!1}]},{id:"mcq-008",title:"Algorithm Complexity",difficulty:"Hard",topics:["Algorithms","Big O"],question:"What is the time complexity of binary search in a sorted array?",image:null,options:[{id:"opt-1",text:"O(log n)",isCorrect:!0},{id:"opt-2",text:"O(n)",isCorrect:!1},{id:"opt-3",text:"O(n\xb2)",isCorrect:!1},{id:"opt-4",text:"O(1)",isCorrect:!1}]},{id:"mcq-009",title:"Git Version Control",difficulty:"Easy",topics:["Git","Version Control"],question:"Which Git command is used to create a new branch?",image:null,options:[{id:"opt-1",text:"git checkout -b branch-name",isCorrect:!0},{id:"opt-2",text:"git create branch-name",isCorrect:!1},{id:"opt-3",text:"git new branch-name",isCorrect:!1},{id:"opt-4",text:"git branch create branch-name",isCorrect:!1}]},{id:"mcq-010",title:"REST API Design",difficulty:"Medium",topics:["REST API","Web Development"],question:"Which HTTP method should be used to update a partial resource in a REST API?",image:null,options:[{id:"opt-1",text:"PATCH",isCorrect:!0},{id:"opt-2",text:"PUT",isCorrect:!1},{id:"opt-3",text:"POST",isCorrect:!1},{id:"opt-4",text:"UPDATE",isCorrect:!1}]}],f={title:"",selectedQuestions:[]};function j(e){let{question:s,isOpen:t,onClose:i}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:s.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(d.E,{variant:"Easy"===s.difficulty?"default":"Medium"===s.difficulty?"secondary":"destructive",children:s.difficulty}),s.topics.map(e=>(0,a.jsx)(d.E,{variant:"outline",children:e},e))]})]}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:i,children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Question"}),(0,a.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded border",children:s.question})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Answer Options"}),(0,a.jsx)("div",{className:"space-y-3",children:s.options.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded p-3 flex items-center gap-3 ".concat(e.isCorrect?"border-green-500 bg-green-50":"border-gray-200 bg-white"),children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 flex items-center justify-center text-xs font-semibold",children:String.fromCharCode(65+s)}),(0,a.jsx)("div",{className:"flex-1 text-sm",children:e.text}),e.isCorrect&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Correct"})]})]},e.id))})]})]})})]})}):null}function b(e){let{initialData:s=f,mode:t,onSave:c,onCancel:o}=e,[b,N]=(0,i.useState)(s),[y,w]=(0,i.useState)(""),[C,A]=(0,i.useState)(""),[S,k]=(0,i.useState)(""),[T,q]=(0,i.useState)(null),z=(0,p.z)(),D=(e,s)=>{N(t=>({...t,[e]:s})),z.markAsUnsaved()};(0,i.useEffect)(()=>{JSON.stringify(b)!==JSON.stringify(s)&&z.markAsUnsaved()},[b,s,z]);let F=Array.from(new Set(g.flatMap(e=>e.topics))),L=Array.from(new Set(g.map(e=>e.difficulty))),M=g.filter(e=>{let s=!y||e.title.toLowerCase().includes(y.toLowerCase())||e.question.toLowerCase().includes(y.toLowerCase()),t=!C||e.topics.includes(C),a=!S||e.difficulty===S;return s&&t&&a}),U=e=>{D("selectedQuestions",(b.selectedQuestions||[]).filter(s=>s.id!==e))},J=e=>(b.selectedQuestions||[]).some(s=>s.id===e),P=async()=>{try{c(b),z.markAsSaved()}catch(e){console.error("Error saving quiz:",e)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("input",{type:"text",value:b.title,onChange:e=>D("title",e.target.value),placeholder:"Quiz Title",className:"text-xl font-semibold bg-transparent border-none outline-none border-b-2 border-border focus:border-primary transition-colors w-full pb-1",style:{fontSize:"1.25rem"}})}),(0,a.jsx)("div",{className:"mb-4 space-y-4",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(l.p,{placeholder:"Search questions...",value:y,onChange:e=>w(e.target.value),className:"pl-9"})]})}),(0,a.jsxs)(n.l6,{value:C,onValueChange:A,children:[(0,a.jsx)(n.bq,{className:"w-40",children:(0,a.jsx)(n.yv,{placeholder:"All Topics"})}),(0,a.jsxs)(n.gC,{children:[(0,a.jsx)(n.eb,{value:"",children:"All Topics"}),F.map(e=>(0,a.jsx)(n.eb,{value:e,children:e},e))]})]}),(0,a.jsxs)(n.l6,{value:S,onValueChange:k,children:[(0,a.jsx)(n.bq,{className:"w-40",children:(0,a.jsx)(n.yv,{placeholder:"All Difficulties"})}),(0,a.jsxs)(n.gC,{children:[(0,a.jsx)(n.eb,{value:"",children:"All Difficulties"}),L.map(e=>(0,a.jsx)(n.eb,{value:e,children:e},e))]})]})]})}),(0,a.jsxs)("div",{className:"flex-1 flex gap-6 min-h-0",children:[(0,a.jsxs)("div",{className:"w-2/5 border rounded-lg overflow-hidden flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,a.jsxs)("h3",{className:"font-semibold text-sm",children:["Content Bank (",M.length," questions)"]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"p-4 space-y-3",children:M.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 transition-colors ".concat(J(e.id)?"border-primary bg-primary/5":"hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.question})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.E,{variant:"Easy"===e.difficulty?"default":"Medium"===e.difficulty?"secondary":"destructive",className:"text-xs",children:e.difficulty}),e.topics.slice(0,2).map(e=>(0,a.jsx)(d.E,{variant:"outline",className:"text-xs",children:e},e)),e.topics.length>2&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.topics.length-2]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(r.$,{variant:"ghost",size:"sm",onClick:()=>q(e),className:"text-xs",children:[(0,a.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"Preview"]}),J(e.id)?(0,a.jsxs)(r.$,{variant:"ghost",size:"sm",onClick:()=>U(e.id),className:"text-xs text-red-600 hover:text-red-700",children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Remove"]}):(0,a.jsxs)(r.$,{variant:"ghost",size:"sm",onClick:()=>{D("selectedQuestions",[...b.selectedQuestions||[],e])},className:"text-xs text-primary hover:text-primary/80",children:[(0,a.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Add"]})]})]})},e.id))})})]}),(0,a.jsxs)("div",{className:"w-3/5 border rounded-lg overflow-hidden flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,a.jsxs)("h3",{className:"font-semibold text-sm",children:["Selected Questions (",(b.selectedQuestions||[]).length,")"]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(b.selectedQuestions||[]).length>0?(0,a.jsx)("div",{className:"space-y-4",children:(b.selectedQuestions||[]).map((e,s)=>(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Question ",s+1]}),(0,a.jsx)(d.E,{variant:"Easy"===e.difficulty?"default":"Medium"===e.difficulty?"secondary":"destructive",className:"text-xs",children:e.difficulty}),e.topics.map(e=>(0,a.jsx)(d.E,{variant:"outline",className:"text-xs",children:e},e))]}),(0,a.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.question})]}),(0,a.jsxs)(r.$,{variant:"ghost",size:"sm",onClick:()=>U(e.id),className:"text-red-600 hover:text-red-700",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-1"}),"Remove"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500",children:"Answer Options:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[e.options.slice(0,2).map((e,s)=>(0,a.jsxs)("div",{className:"text-xs p-2 rounded border ".concat(e.isCorrect?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"),children:[(0,a.jsxs)("span",{className:"font-medium",children:[String.fromCharCode(65+s),"."]})," ",e.text,e.isCorrect&&(0,a.jsx)("span",{className:"text-green-600 ml-2",children:"âœ“"})]},e.id)),e.options.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center py-1",children:["+",e.options.length-2," more options"]})]})]})]})},e.id))}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDD"}),(0,a.jsx)("p",{className:"text-sm",children:"Select questions from the content bank"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Multiple questions can be added with no upper limit"})]})})})]})]})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-t bg-background",children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>{z.hasUnsavedChanges?z.attemptAction(o):o()},children:"Cancel"}),(0,a.jsx)(r.$,{onClick:P,children:"create"===t?"Add Quiz":"Edit Quiz"})]}),T&&(0,a.jsx)(j,{question:T,isOpen:!!T,onClose:()=>q(null)}),(0,a.jsx)(v.n,{isOpen:z.showWarningModal,onClose:z.closeModal,onDiscard:z.discardChanges,onSave:()=>z.saveAndContinue(P)})]})}},4208:(e,s,t)=>{t.d(s,{F:()=>p});var a=t(5155),i=t(2115),l=t(2523),r=t(8539),n=t(5057),d=t(285),c=t(333),o=t(9409),m=t(9103),x=t(2525),u=t(6193),h=t(4209);function p(e){var s;let{initialData:t,onSave:p,onCancel:v,mode:g}=e,[f,j]=(0,i.useState)(t||{id:"feedback-".concat(Date.now()),type:"feedback-form",title:"",description:"",createdAt:new Date,updatedAt:new Date,status:"draft",questions:[{id:"question-1",questionType:"short-text",questionText:"",required:!0,ratingScale:{min:1,max:10,minLabel:"",midLabel:"",maxLabel:""}}]}),b=(0,u.z)(),N=(e,s)=>{j(t=>({...t,[e]:s})),b.markAsUnsaved()};(0,i.useEffect)(()=>{JSON.stringify(f)!==JSON.stringify(t)&&b.markAsUnsaved()},[f,t,b]);let y=[{value:"short-text",label:"Short Text"},{value:"long-text",label:"Long Text"},{value:"rating",label:"Rating"},{value:"date",label:"Date"},{value:"time",label:"Time"},{value:"multiple-choice",label:"Multiple Choice"},{value:"single-choice",label:"Single Choice"}],w=(e,s,t)=>{N("questions",(f.questions||[]).map(a=>a.id===e?{...a,[s]:t}:a))},C=async()=>{try{p(f),b.markAsSaved()}catch(e){console.error("Error saving feedback form:",e)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)("input",{type:"text",value:f.title,onChange:e=>N("title",e.target.value),placeholder:"Feedback Form Title",className:"text-xl font-semibold bg-transparent border-none outline-none border-b-2 border-border focus:border-primary transition-colors w-full pb-1",style:{fontSize:"1.25rem"}})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium",children:["Questions (",(null==(s=f.questions)?void 0:s.length)||0,")"]}),(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>{let e={id:"question-".concat(Date.now()),questionType:"short-text",questionText:"",required:!0,options:[],ratingScale:{min:1,max:10,minLabel:"",midLabel:"",maxLabel:""}};N("questions",[...f.questions||[],e])},children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Add Question"]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(f.questions||[]).map((e,s)=>{var t,i,u;return(0,a.jsx)("div",{className:"border rounded-lg p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"font-medium",children:["Question ",s+1]}),s>0&&(0,a.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>{var s;return s=e.id,void N("questions",(f.questions||[]).filter(e=>e.id!==s))},className:"text-destructive hover:text-destructive-dark",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"Delete"]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{className:"font-semibold",children:"Question Type"}),(0,a.jsxs)(o.l6,{value:e.questionType,onValueChange:s=>w(e.id,"questionType",s),children:[(0,a.jsx)(o.bq,{children:(0,a.jsx)(o.yv,{placeholder:"Select question type"})}),(0,a.jsx)(o.gC,{children:y.map(e=>(0,a.jsx)(o.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.J,{className:"font-semibold",children:"Required"}),(0,a.jsx)(c.d,{checked:e.required,onCheckedChange:s=>w(e.id,"required",s)})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{className:"font-semibold",children:"Question Text"}),(0,a.jsx)(r.T,{value:e.questionText,onChange:s=>w(e.id,"questionText",s.target.value),placeholder:"Enter question text",rows:3})]}),("multiple-choice"===e.questionType||"single-choice"===e.questionType)&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.J,{className:"font-semibold",children:"Answer Options"}),(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>{var s;return s=e.id,void N("questions",(f.questions||[]).map(e=>{var t;return e.id===s?{...e,options:[...e.options||[],"Option ".concat(((null==(t=e.options)?void 0:t.length)||0)+1)]}:e}))},children:[(0,a.jsx)(m.A,{className:"mr-2 h-3 w-3"}),"Add Option"]})]}),e.options&&e.options.length>0?(0,a.jsx)("div",{className:"space-y-2",children:e.options.map((s,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-6 flex justify-center",children:"multiple-choice"===e.questionType?(0,a.jsx)("div",{className:"h-4 w-4 border-2 border-gray-300 rounded"}):(0,a.jsx)("div",{className:"h-4 w-4 border-2 border-gray-300 rounded-full"})}),(0,a.jsx)(l.p,{value:s,onChange:s=>{var a,i;return a=e.id,i=s.target.value,void N("questions",(f.questions||[]).map(e=>{var s;return e.id===a?{...e,options:null==(s=e.options)?void 0:s.map((e,s)=>s===t?i:e)}:e}))},placeholder:"Option ".concat(t+1),className:"flex-1"}),(0,a.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>{var s;return s=e.id,void N("questions",(f.questions||[]).map(e=>{var a;return e.id===s?{...e,options:null==(a=e.options)?void 0:a.filter((e,s)=>s!==t)}:e}))},className:"text-destructive hover:text-destructive-dark",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]},t))}):(0,a.jsx)("div",{className:"text-center py-3 text-sm text-muted-foreground border rounded",children:"No options added yet"})]}),"rating"===e.questionType&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{className:"font-semibold",children:"Rating Scale (1 to 10 default)"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Rating will be from 1 to 10. You can add labels for 1, 5, and 10."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{className:"font-semibold",children:"Label for 1 (Lowest)"}),(0,a.jsx)(l.p,{value:(null==(t=e.ratingScale)?void 0:t.minLabel)||"",onChange:s=>{var t,a;return w(e.id,"ratingScale",{min:1,max:10,minLabel:s.target.value,midLabel:(null==(t=e.ratingScale)?void 0:t.midLabel)||"",maxLabel:(null==(a=e.ratingScale)?void 0:a.maxLabel)||""})},placeholder:"e.g., Poor, Never, Strongly Disagree"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{className:"font-semibold",children:"Label for 5 (Middle)"}),(0,a.jsx)(l.p,{value:(null==(i=e.ratingScale)?void 0:i.midLabel)||"",onChange:s=>{var t,a;return w(e.id,"ratingScale",{min:1,max:10,minLabel:(null==(t=e.ratingScale)?void 0:t.minLabel)||"",midLabel:s.target.value,maxLabel:(null==(a=e.ratingScale)?void 0:a.maxLabel)||""})},placeholder:"e.g., Average, Sometimes, Neutral"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{className:"font-semibold",children:"Label for 10 (Highest)"}),(0,a.jsx)(l.p,{value:(null==(u=e.ratingScale)?void 0:u.maxLabel)||"",onChange:s=>{var t,a;return w(e.id,"ratingScale",{min:1,max:10,minLabel:(null==(t=e.ratingScale)?void 0:t.minLabel)||"",midLabel:(null==(a=e.ratingScale)?void 0:a.midLabel)||"",maxLabel:s.target.value})},placeholder:"e.g., Excellent, Always, Strongly Agree"})]})]})]})]})]})},e.id)})})]})]})})}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-t bg-background sticky bottom-0",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>{b.hasUnsavedChanges?b.attemptAction(v):v()},children:"Cancel"}),(0,a.jsx)(d.$,{onClick:C,children:"create"===g?"Add Feedback Form":"Edit Feedback Form"})]}),(0,a.jsx)(h.n,{isOpen:b.showWarningModal,onClose:b.closeModal,onDiscard:b.discardChanges,onSave:()=>b.saveAndContinue(C)})]})}},4636:(e,s,t)=>{t.d(s,{AM:()=>n,Wv:()=>d,hl:()=>c});var a=t(5155),i=t(2115),l=t(547),r=t(9434);let n=l.bL,d=l.l9,c=i.forwardRef((e,s)=>{let{className:t,align:i="center",sideOffset:n=4,...d}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:s,align:i,sideOffset:n,className:(0,r.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...d})})});c.displayName=l.UC.displayName},4772:(e,s,t)=>{t.d(s,{A:()=>N});var a=t(5155),i=t(2115),l=t(2523),r=t(8539),n=t(5057),d=t(356),c=t(285),o=t(9727),m=t(9144),x=t(7240),u=t(8164),h=t(7434),p=t(3786),v=t(9869),g=t(3744),f=t(6193),j=t(4209);let b={title:"",content:"",contentType:"rich-text"};function N(e){let{initialData:s=b,mode:t,onSave:N,onCancel:y,hideCancel:w=!1}=e,[C,A]=(0,i.useState)(s),S=(0,f.z)(),k=(e,s)=>{A(t=>({...t,[e]:s})),S.markAsUnsaved()};(0,i.useEffect)(()=>{JSON.stringify(C)!==JSON.stringify(s)&&S.markAsUnsaved()},[C,s]);let T=async()=>{try{"rich-text"===C.contentType&&k("estimatedReadTime",Math.ceil((C.content||"").trim().split(/\s+/).length/200)),N(C),S.markAsSaved()}catch(e){console.error("Error saving article:",e)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)("input",{type:"text",value:C.title,onChange:e=>k("title",e.target.value),placeholder:"Article Title",className:"text-xl font-semibold bg-transparent border-none outline-none border-b-2 border-border focus:border-primary transition-colors w-full pb-1",style:{fontSize:"1.25rem"}})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(n.J,{children:"Content Type"}),(0,a.jsxs)(d.z,{value:C.contentType,onValueChange:e=>{A(s=>({...s,contentType:e}))},className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"rich-text",id:"rich-text"}),(0,a.jsx)(n.J,{htmlFor:"rich-text",className:"cursor-pointer",children:"Rich Text"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"external-link",id:"external-link"}),(0,a.jsx)(n.J,{htmlFor:"external-link",className:"cursor-pointer",children:"External Link"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"upload",id:"upload"}),(0,a.jsx)(n.J,{htmlFor:"upload",className:"cursor-pointer",children:"Upload PDF"})]})]})]}),"rich-text"===C.contentType&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{children:"Article Content"}),(0,a.jsxs)("div",{className:"border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 p-3 border-b bg-gray-50",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 w-8 p-0",children:(0,a.jsx)(o.A,{className:"h-4 w-4"})}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 w-8 p-0",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 w-8 p-0",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-px h-4 bg-border mx-2"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 px-2 text-xs font-semibold",children:"H1"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 px-2 text-xs font-semibold",children:"H2"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 px-2 text-xs font-semibold",children:"H3"}),(0,a.jsx)("div",{className:"w-px h-4 bg-border mx-2"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 px-2 text-xs",children:"â€¢ List"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 px-2 text-xs",children:"1. List"}),(0,a.jsxs)(c.$,{variant:"ghost",size:"sm",type:"button",className:"h-8 px-2 text-xs",children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Link"]})]}),(0,a.jsx)(r.T,{value:C.content||"",onChange:e=>k("content",e.target.value),placeholder:"Write your article content here... You can use the formatting tools above to style your text.",className:"min-h-[300px] border-0 resize-none focus-visible:ring-0"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Estimated read time: ",C.estimatedReadTime||Math.ceil(((C.content||"").trim().split(/\s+/).length||1)/200)," minute(s)"]})]})}),"external-link"===C.contentType&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.J,{htmlFor:"externalLink",children:"Article Link"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(l.p,{id:"externalLink",type:"url",value:C.externalLink||"",onChange:e=>k("externalLink",e.target.value),placeholder:"https://example.com/article"})})]}),C.externalLink&&(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-16 h-12 bg-blue-600 rounded flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:C.title||"External Article"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(()=>{try{return new URL(C.externalLink).hostname}catch(e){return"Invalid URL"}})()}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:C.externalLink})]}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]})})]}),"upload"===C.contentType&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{children:"Upload PDF Article"}),(0,a.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t){if("application/pdf"!==t.type)return void alert("Please select a PDF file only");if(t.size>0xa00000)return void alert("File size must be less than 10MB");k("fileUrl",URL.createObjectURL(t)),console.log("PDF file uploaded:",t.name,t.size,t.type)}},className:"hidden",id:"pdf-file-upload"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",children:[(0,a.jsx)(v.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Drag and drop or click to upload PDF file"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Supported format: PDF files only (Max 10MB)"}),(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>{var e;null==(e=document.getElementById("pdf-file-upload"))||e.click()},className:"mt-3",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Choose PDF File"]})]})]}),C.fileUrl&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-red-600 rounded flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"âœ“ PDF uploaded successfully"}),(0,a.jsx)("p",{className:"text-xs text-green-600",children:"Ready for preview"})]}),(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>window.open(C.fileUrl,"_blank"),children:"Preview PDF"})]})})]})]})})}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-t bg-background sticky bottom-0",children:[!w&&(0,a.jsx)(c.$,{variant:"outline",onClick:()=>{S.hasUnsavedChanges?S.attemptAction(y):y()},children:"Cancel"}),(0,a.jsx)(c.$,{onClick:T,className:w?"ml-auto":"",children:"create"===t?"Add Article":"Edit Article"})]}),(0,a.jsx)(j.n,{isOpen:S.showWarningModal,onClose:S.closeModal,onDiscard:S.discardChanges,onSave:()=>S.saveAndContinue(T)})]})}},5511:(e,s,t)=>{t.d(s,{V:()=>c});var a=t(5155);t(2115);var i=t(2355),l=t(3052),r=t(3900),n=t(9434),d=t(285);function c(e){let{className:s,classNames:t,showOutsideDays:c=!0,...o}=e;return(0,a.jsx)(r.hv,{showOutsideDays:c,className:(0,n.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{...s}=e;return(0,a.jsx)(i.A,{className:"h-4 w-4"})},IconRight:e=>{let{...s}=e;return(0,a.jsx)(l.A,{className:"h-4 w-4"})}},...o})}c.displayName="Calendar"},7283:(e,s,t)=>{t.d(s,{L:()=>g});var a=t(5155),i=t(2115),l=t(2523),r=t(8539),n=t(5057),d=t(356),c=t(285),o=t(9803),m=t(3786),x=t(9869),u=t(3744),h=t(6193),p=t(4209);let v={title:"",description:"",sourceType:"youtube"};function g(e){let{initialData:s=v,mode:t,onSave:g,onCancel:f}=e,[j,b]=(0,i.useState)(s),[N,y]=(0,i.useState)(s.url||null),w=(0,h.z)(),C=(e,s)=>{b(t=>({...t,[e]:s})),w.markAsUnsaved()};(0,i.useEffect)(()=>{JSON.stringify(j)!==JSON.stringify(s)&&w.markAsUnsaved()},[j,s]);let A=async()=>{try{g(j),w.markAsSaved()}catch(e){console.error("Error saving video:",e)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)("input",{type:"text",value:j.title,onChange:e=>C("title",e.target.value),placeholder:"Video Title",className:"text-xl font-semibold bg-transparent border-none outline-none border-b-2 border-border focus:border-primary transition-colors w-full pb-1",style:{fontSize:"1.25rem"}})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(r.T,{id:"description",value:j.description,onChange:e=>C("description",e.target.value),placeholder:"Enter video description",className:"min-h-[100px]"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(n.J,{children:"Video Source"}),(0,a.jsxs)(d.z,{value:j.sourceType,onValueChange:e=>{b(s=>({...s,sourceType:e})),y(null)},className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"youtube",id:"youtube"}),(0,a.jsx)(n.J,{htmlFor:"youtube",className:"cursor-pointer",children:"YouTube"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.C,{value:"upload",id:"upload"}),(0,a.jsx)(n.J,{htmlFor:"upload",className:"cursor-pointer",children:"Direct Upload"})]})]})]}),"youtube"===j.sourceType&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.J,{htmlFor:"url",children:"YouTube URL"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(l.p,{id:"url",type:"url",value:j.url||"",onChange:e=>{var s;C("url",s=e.target.value),s&&"youtube"===j.sourceType&&((e=>{let s=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return s?s[1]:null})(s)?y(s):s.length>10&&console.warn("Invalid YouTube URL format"))},placeholder:"https://www.youtube.com/watch?v=..."})})]}),j.url&&(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-16 h-12 bg-red-600 rounded flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:j.title||"YouTube Video"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"youtube.com"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:j.url})]}),(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]})})]}),"upload"===j.sourceType&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{children:"Upload Video File"}),(0,a.jsx)("input",{type:"file",accept:"video/mp4,video/mov,video/avi,video/wmv,video/quicktime",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t){if(!["video/mp4","video/mov","video/avi","video/wmv","video/quicktime"].includes(t.type))return void alert("Please select a valid video file (MP4, MOV, AVI, WMV)");if(t.size>0x3200000)return void alert("File size must be less than 50MB");let e=URL.createObjectURL(t);C("fileUrl",e),y(e),console.log("Video file uploaded:",t.name,t.size,t.type)}},className:"hidden",id:"video-file-upload"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",children:[(0,a.jsx)(x.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Drag and drop or click to upload a video file"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Supported formats: MP4, MOV, AVI, WMV (Max 50MB)"}),(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>{var e;null==(e=document.getElementById("video-file-upload"))||e.click()},className:"mt-3",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Choose File"]})]})]}),j.fileUrl&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"âœ“ Video uploaded successfully"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("video",{src:j.fileUrl,className:"w-full max-w-sm h-32 object-cover rounded border",controls:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(n.J,{htmlFor:"transcript",children:["Transcript ",(0,a.jsx)("span",{className:"text-sm text-muted-foreground font-normal",children:"(Optional)"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Upload transcript file"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Supported formats: TXT, SRT, VTT"}),(0,a.jsx)("input",{type:"file",accept:".txt,.srt,.vtt",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t){C("transcriptFile",t);let e=new FileReader;e.onload=e=>{var s;C("transcript",null==(s=e.target)?void 0:s.result)},e.readAsText(t)}},className:"hidden",id:"transcript-upload"}),(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=document.getElementById("transcript-upload"))?void 0:e.click()},className:"mt-2",children:"Choose File"})]})]}),j.transcript&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"âœ“ Transcript uploaded successfully"})})]})]})})}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-t bg-background sticky bottom-0",children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>{w.hasUnsavedChanges?w.attemptAction(f):f()},children:"Cancel"}),(0,a.jsx)(c.$,{onClick:A,children:"create"===t?"Add Video":"Edit Video"})]}),(0,a.jsx)(p.n,{isOpen:w.showWarningModal,onClose:w.closeModal,onDiscard:w.discardChanges,onSave:()=>w.saveAndContinue(A)})]})}},9828:(e,s,t)=>{t.d(s,{C:()=>N});var a=t(5155),i=t(2115),l=t(2523),r=t(8539),n=t(5057),d=t(285),c=t(6126),o=t(5511),m=t(4636),x=t(356),u=t(9074),h=t(1284),p=t(3013),v=t(9434),g=t(6193),f=t(4209);let j=[{id:"existing-1",title:"Introduction to JavaScript Basics",date:"2025-10-05",batchName:"Batch A - Fall 2025"},{id:"existing-2",title:"Advanced React Patterns",date:"2025-10-08",batchName:"Batch B - Fall 2025"},{id:"existing-3",title:"Node.js and Express Fundamentals",date:"2025-10-12",batchName:"Batch A - Fall 2025"}],b={title:"",description:"",mode:"new",startDate:void 0,startTime:"",duration:90,meetingPlatform:"zoom",classStatus:"upcoming"};function N(e){var s;let{initialData:t=b,mode:N,onSave:y,onCancel:w}=e,[C,A]=(0,i.useState)({...b,...t}),[S,k]=(0,i.useState)(""),[T,q]=(0,i.useState)(!1),z=(0,g.z)();(0,i.useEffect)(()=>{A({...b,...t}),q(!1)},[t]);let D="ongoing"===C.classStatus||"completed"===C.classStatus,F=!D,L=(e,s)=>{A(t=>({...t,[e]:s})),q(!0),z.markAsUnsaved()},M=async()=>{try{let e={...C};if("new"===C.mode&&!C.meetingUrl){let s=(()=>{let e=C.meetingPlatform||"zoom",s=Math.floor(1e8+9e8*Math.random()).toString(),t=Math.random().toString(36).substring(2,8).toUpperCase();return{meetingUrl:"zoom"===e?"https://zoom.us/j/".concat(s):"https://meet.google.com/".concat(Math.random().toString(36).substring(2,12)),meetingId:s,meetingPassword:t}})();e={...e,...s}}y(e),q(!1),z.markAsSaved()}catch(e){console.error("Error saving live class:",e)}};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b bg-background shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:C.title||"Untitled Live Class"}),C.classStatus&&(e=>{switch(e){case"upcoming":return(0,a.jsx)(c.E,{className:"bg-primary-light text-primary border-primary",children:"Upcoming"});case"ongoing":return(0,a.jsx)(c.E,{className:"bg-secondary-light text-secondary border-secondary",children:"Ongoing"});case"completed":return(0,a.jsx)(c.E,{className:"bg-success-light text-success border-success",children:"Completed"})}})(C.classStatus)]}),F&&(0,a.jsx)(d.$,{onClick:M,disabled:!T,children:"Save Live Class"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[!D&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(n.J,{children:"Class Type"}),(0,a.jsxs)(x.z,{value:C.mode||"new",onValueChange:e=>{L("mode",e),k("")},disabled:D,className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.C,{value:"new",id:"new-class"}),(0,a.jsx)(n.J,{htmlFor:"new-class",className:"font-normal cursor-pointer",children:"New Live Class"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.C,{value:"existing",id:"existing-class"}),(0,a.jsx)(n.J,{htmlFor:"existing-class",className:"font-normal cursor-pointer",children:"Select from Existing Classes"})]})]})]}),"existing"===C.mode&&!D&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(n.J,{children:"Available Classes"}),(0,a.jsx)(x.z,{value:S,onValueChange:e=>{k(e);let s=j.find(s=>s.id===e);s&&(A(t=>({...t,existingClassId:e,title:s.title,batchName:s.batchName})),q(!0),z.markAsUnsaved())},children:(0,a.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,a.jsx)("div",{className:(0,v.cn)("border rounded-lg p-4 cursor-pointer transition-colors",S===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x.C,{value:e.id,id:e.id,className:"mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(n.J,{htmlFor:e.id,className:"font-medium cursor-pointer",children:e.title}),(0,a.jsxs)("div",{className:"flex gap-3 mt-1 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:e.date}),(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsx)("span",{children:e.batchName})]})]})]})},e.id))})})]}),"new"===C.mode&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(l.p,{id:"title",type:"text",value:C.title||"",onChange:e=>L("title",e.target.value),placeholder:"Enter live class title",disabled:D})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(r.T,{id:"description",value:C.description||"",onChange:e=>L("description",e.target.value),placeholder:"Enter live class description",className:"min-h-[100px]",disabled:D})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{htmlFor:"date",children:"Date"}),(0,a.jsxs)(m.AM,{children:[(0,a.jsx)(m.Wv,{asChild:!0,children:(0,a.jsxs)(d.$,{variant:"outline",disabled:D,className:(0,v.cn)("w-full justify-start text-left font-normal",!C.startDate&&"text-muted-foreground"),children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),C.startDate?(0,p.GP)(C.startDate,"MMM d, yyyy"):(0,a.jsx)("span",{children:"Select a date"})]})}),(0,a.jsx)(m.hl,{className:"w-auto p-0",children:(0,a.jsx)(o.V,{mode:"single",selected:C.startDate,onSelect:e=>{L("startDate",e)},initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{htmlFor:"startTime",children:"Start Time"}),(0,a.jsx)(l.p,{id:"startTime",type:"time",value:C.startTime||"",onChange:e=>L("startTime",e.target.value),disabled:D})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.J,{htmlFor:"duration",children:"Duration (minutes)"}),(0,a.jsx)(l.p,{id:"duration",type:"number",min:"15",max:"480",step:"15",value:C.duration||90,onChange:e=>L("duration",parseInt(e.target.value)||0),placeholder:"90",disabled:D})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(n.J,{children:"Meeting Platform"}),(0,a.jsxs)(x.z,{value:C.meetingPlatform||"zoom",onValueChange:e=>L("meetingPlatform",e),disabled:D,className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.C,{value:"zoom",id:"zoom"}),(0,a.jsx)(n.J,{htmlFor:"zoom",className:"font-normal cursor-pointer",children:"Zoom"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.C,{value:"google-meet",id:"google-meet"}),(0,a.jsx)(n.J,{htmlFor:"google-meet",className:"font-normal cursor-pointer",children:"Google Meet"})]})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-blue-900",children:["zoom"===C.meetingPlatform?"Zoom":"Google Meet"," Meeting Integration"]}),(0,a.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["A ","zoom"===C.meetingPlatform?"Zoom":"Google Meet"," class link will be generated and emailed to everyone automatically when you save this live class."]})]})]})}),C.meetingUrl&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 text-green-800",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:"Meeting Link Generated"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.J,{className:"text-xs font-semibold text-green-900",children:"Meeting URL"}),(0,a.jsx)("div",{className:"text-sm text-blue-600 mt-1",children:(0,a.jsx)("a",{href:C.meetingUrl,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:C.meetingUrl})})]}),"zoom"===C.meetingPlatform&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.J,{className:"text-xs font-semibold text-green-900",children:"Meeting ID"}),(0,a.jsx)("div",{className:"text-sm font-mono text-green-800 mt-1",children:C.meetingId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.J,{className:"text-xs font-semibold text-green-900",children:"Password"}),(0,a.jsx)("div",{className:"text-sm font-mono text-green-800 mt-1",children:C.meetingPassword})]})]})]})]})]}),"completed"===C.classStatus&&C.recordingUrl&&(0,a.jsx)("div",{className:"space-y-4 mt-8",children:(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Class Recording"}),"youtube"===C.recordingPlatform?(0,a.jsx)("div",{className:"aspect-video w-full rounded-lg overflow-hidden border",children:(0,a.jsx)("iframe",{src:C.recordingUrl.includes("embed")?C.recordingUrl:"https://www.youtube.com/embed/".concat((null==(s=C.recordingUrl.split("v=")[1])?void 0:s.split("&")[0])||""),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Class Recording"})}):(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("video",{src:C.recordingUrl,className:"w-full rounded-lg border",controls:!0,controlsList:"nodownload",children:"Your browser does not support the video tag."})})]})})]})})}),(0,a.jsx)(f.n,{isOpen:z.showWarningModal,onClose:z.closeModal,onDiscard:z.discardChanges,onSave:()=>z.saveAndContinue(M)})]})}}}]);